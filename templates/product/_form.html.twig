{{ form_start(form) }}
    
    {# 1. Name Section #}
    <div class="mb-3">
        {{ form_label(form.name, 'Nom du produit', {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.name, {'attr': {'class': 'form-control', 'placeholder': 'Ex: HP EliteBook'}}) }}
        {{ form_errors(form.name) }}
    </div>

    {# 2. Reference & Alert Section #}
    <div class="row">
        <div class="col-md-6 mb-3">
            {{ form_label(form.reference, 'Référence', {'label_attr': {'class': 'form-label'}}) }}
            {{ form_widget(form.reference, {'attr': {'class': 'form-control'}}) }}
        </div>
        <div class="col-md-6 mb-3">
            {{ form_label(form.alertThreshold, 'Seuil d\'alerte', {'label_attr': {'class': 'form-label text-danger fw-bold'}}) }}
            {{ form_widget(form.alertThreshold, {'attr': {'class': 'form-control border-danger'}}) }}
        </div>
    </div>

    {# 3. Pricing Section #}
    <div class="row">
        <div class="col-md-6 mb-3">
            {{ form_label(form.purchasePrice, 'Prix d\'achat', {'label_attr': {'class': 'form-label'}}) }}
            <div class="input-group">
                {{ form_widget(form.purchasePrice, {'attr': {'class': 'form-control'}}) }}
                <span class="input-group-text">MAD</span>
            </div>
        </div>
        <div class="col-md-6 mb-3">
            {{ form_label(form.salesPrice, 'Prix de vente', {'label_attr': {'class': 'form-label'}}) }}
            <div class="input-group">
                {{ form_widget(form.salesPrice, {'attr': {'class': 'form-control'}}) }}
                <span class="input-group-text">MAD</span>
            </div>
        </div>
    </div>

    {# 4. Quantity & Category Section (New Layout) #}
    <div class="row">
        <div class="col-md-6 mb-3">
            {{ form_label(form.quantity, 'Quantité Initiale', {'label_attr': {'class': 'form-label'}}) }}
            {{ form_widget(form.quantity, {'attr': {'class': 'form-control'}}) }}
        </div>
        
        {# THIS IS THE NEW PART: Manually rendering the Category #}
        <div class="col-md-6 mb-3">
            {{ form_label(form.category, 'Catégorie', {'label_attr': {'class': 'form-label'}}) }}
            {# Note: 'form-select' looks better than 'form-control' for dropdowns #}
            {{ form_widget(form.category, {'attr': {'class': 'form-select'}}) }}
            {{ form_errors(form.category) }}
        </div>
    </div>

    <div class="d-grid gap-2 mt-4">
        <button class="btn btn-success btn-lg">{{ button_label|default('Enregistrer le produit') }}</button>
    </div>

{{ form_end(form) }}